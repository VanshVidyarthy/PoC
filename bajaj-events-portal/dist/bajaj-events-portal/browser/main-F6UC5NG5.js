import{a as ot}from"./chunk-3CJZOY56.js";import{a as $,c as Y,d as et,f as tt,h as J,i as it,p as nt,q as rt,r as at,t as Z}from"./chunk-RLQN25BN.js";import{a as dt}from"./chunk-B745S3R6.js";import{$ as S,A as z,Aa as Ue,D as oe,Da as qe,E as f,F as Re,Fa as $e,G as Fe,Ga as Ye,H as se,Ha as q,Ia as Je,J as F,Ja as Ze,Ka as Xe,La as Ke,M as je,Ma as Qe,N as x,Na as st,O as C,Oa as lt,P as W,Pa as D,Q as G,Qa as X,R as U,Ra as pt,S as _,Sa as ct,T as r,Ta as mt,U as a,V as N,W as w,X as T,Y as le,Z as Be,_ as Ve,ba as b,da as c,e as Q,ea as y,fa as ee,ga as o,h as Ie,ha as d,i as we,ia as P,j as Pe,ja as Oe,ka as j,la as B,m as Te,ma as V,n as Me,oa as te,p as v,pa as pe,q as u,qa as L,r as g,ra as He,sa as M,t as Ne,ta as ze,u as De,v as Ae,wa as We,z as s,za as Ge}from"./chunk-PREQNWUY.js";var ie=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-ep-home"]],decls:5,vars:0,template:function(e,n){e&1&&(w(0,"h1"),o(1,"Welcome to Bajaj Finserv Events Portal"),T(),le(2,"hr"),w(3,"h6"),o(4,"Designed and developed by Bajaj Finserv Development Team"),T())},encapsulation:2})};var ce=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-resource-not-found"]],decls:2,vars:0,template:function(e,n){e&1&&(w(0,"h1"),o(1,"Resource Not Found!"),T())},encapsulation:2})};var me=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-employee-forbidden-access"]],decls:5,vars:0,consts:[[1,"container"]],template:function(e,n){e&1&&(w(0,"div",0)(1,"h2"),o(2,"Forbidden Access"),T(),w(3,"p"),o(4,"You do not have permission to access HR resource! We have logged your activity with your credentials."),T()())},encapsulation:2})};var de=class t{transform(i,...e){if(!i)return i;let n=e[0]?e[0]:"en-IN";return new Intl.DateTimeFormat(n,{weekday:"long",year:"numeric",month:"long",day:"2-digit",hour:"2-digit",minute:"2-digit",dayPeriod:"short"}).format(new Date(i))}static \u0275fac=function(e){return new(e||t)};static \u0275pipe=se({name:"dateGlobalization",type:t,pure:!0})};function It(t,i){if(t&1){let e=S();r(0,"a",12),b("keyup.enter",function(){u(e),c(3);let l=y(1);return g(l.previous())})("click",function(){u(e),c(3);let l=y(1);return g(l.previous())}),o(1),r(2,"span",13),o(3),a()()}if(t&2){let e=c(3);s(),P(" ",e.previousLabel," "),s(2),d(e.screenReaderPageLabel)}}function Pt(t,i){if(t&1&&(r(0,"span",14),o(1),r(2,"span",13),o(3),a()()),t&2){let e=c(3);s(),P(" ",e.previousLabel," "),s(2),d(e.screenReaderPageLabel)}}function Lt(t,i){if(t&1&&(r(0,"li",9),F(1,It,4,2,"a",10)(2,Pt,4,2,"span",11),a()),t&2){c(2);let e=y(1);ee("disabled",e.isFirstPage()),s(),_("ngIf",1<e.getCurrent()),s(),_("ngIf",e.isFirstPage())}}function kt(t,i){if(t&1){let e=S();r(0,"a",12),b("keyup.enter",function(){u(e);let l=c().$implicit;c(2);let p=y(1);return g(p.setCurrent(l.value))})("click",function(){u(e);let l=c().$implicit;c(2);let p=y(1);return g(p.setCurrent(l.value))}),r(1,"span",13),o(2),a(),r(3,"span"),o(4),L(5,"number"),a()()}if(t&2){let e=c().$implicit,n=c(2);s(2),P("",n.screenReaderPageLabel," "),s(2),d(e.label==="..."?e.label:M(5,2,e.label,""))}}function wt(t,i){if(t&1&&(Be(0),r(1,"span",16)(2,"span",13),o(3),a(),r(4,"span"),o(5),L(6,"number"),a()(),Ve()),t&2){let e=c().$implicit,n=c(2);s(3),P("",n.screenReaderCurrentLabel," "),s(2),d(e.label==="..."?e.label:M(6,2,e.label,""))}}function Tt(t,i){if(t&1&&(r(0,"li"),F(1,kt,6,5,"a",10)(2,wt,7,5,"ng-container",15),a()),t&2){let e=i.$implicit;c(2);let n=y(1);ee("current",n.getCurrent()===e.value)("ellipsis",e.label==="..."),s(),_("ngIf",n.getCurrent()!==e.value),s(),_("ngIf",n.getCurrent()===e.value)}}function Mt(t,i){if(t&1){let e=S();r(0,"a",12),b("keyup.enter",function(){u(e),c(3);let l=y(1);return g(l.next())})("click",function(){u(e),c(3);let l=y(1);return g(l.next())}),o(1),r(2,"span",13),o(3),a()()}if(t&2){let e=c(3);s(),P(" ",e.nextLabel," "),s(2),d(e.screenReaderPageLabel)}}function Nt(t,i){if(t&1&&(r(0,"span",14),o(1),r(2,"span",13),o(3),a()()),t&2){let e=c(3);s(),P(" ",e.nextLabel," "),s(2),d(e.screenReaderPageLabel)}}function Dt(t,i){if(t&1&&(r(0,"li",17),F(1,Mt,4,2,"a",10)(2,Nt,4,2,"span",11),a()),t&2){c(2);let e=y(1);ee("disabled",e.isLastPage()),s(),_("ngIf",!e.isLastPage()),s(),_("ngIf",e.isLastPage())}}function At(t,i){if(t&1&&(r(0,"ul",4),F(1,Lt,3,4,"li",5),r(2,"li",6),o(3),a(),F(4,Tt,3,6,"li",7)(5,Dt,3,4,"li",8),a()),t&2){let e=c(),n=y(1);ee("responsive",e.responsive),s(),_("ngIf",e.directionLinks),s(2),Oe(" ",n.getCurrent()," / ",n.getLastPage()," "),s(),_("ngForOf",n.pages)("ngForTrackBy",e.trackByIndex),s(),_("ngIf",e.directionLinks)}}var ne=class{constructor(){this.change=new z,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}defaultId(){return this.DEFAULT_ID}register(i){return i.id==null&&(i.id=this.DEFAULT_ID),this.instances[i.id]?this.updateInstance(i):(this.instances[i.id]=i,!0)}updateInstance(i){let e=!1;for(let n in this.instances[i.id])i[n]!==this.instances[i.id][n]&&(this.instances[i.id][n]=i[n],e=!0);return e}getCurrentPage(i){return this.instances[i]?this.instances[i].currentPage:1}setCurrentPage(i,e){if(this.instances[i]){let n=this.instances[i],l=Math.ceil(n.totalItems/n.itemsPerPage);e<=l&&1<=e&&(this.instances[i].currentPage=e,this.change.emit(i))}}setTotalItems(i,e){this.instances[i]&&0<=e&&(this.instances[i].totalItems=e,this.change.emit(i))}setItemsPerPage(i,e){this.instances[i]&&(this.instances[i].itemsPerPage=e,this.change.emit(i))}getInstance(i=this.DEFAULT_ID){return this.instances[i]?this.clone(this.instances[i]):{}}clone(i){var e={};for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n]);return e}},Rt=Number.MAX_SAFE_INTEGER,ue=(()=>{class t{constructor(e){this.service=e,this.state={}}transform(e,n){if(!(e instanceof Array)){let O=n.id||this.service.defaultId();return this.state[O]?this.state[O].slice:e}let l=n.totalItems&&n.totalItems!==e.length,p=this.createInstance(e,n),m=p.id,h,E,I=p.itemsPerPage,re=this.service.register(p);if(!l&&e instanceof Array){if(I=+I||Rt,h=(p.currentPage-1)*I,E=h+I,this.stateIsIdentical(m,e,h,E))return this.state[m].slice;{let ae=e.slice(h,E);return this.saveState(m,e,ae,h,E),this.service.change.emit(m),ae}}else return re&&this.service.change.emit(m),this.saveState(m,e,e,h,E),e}createInstance(e,n){return this.checkConfig(n),{id:n.id!=null?n.id:this.service.defaultId(),itemsPerPage:+n.itemsPerPage||0,currentPage:+n.currentPage||1,totalItems:+n.totalItems||e.length}}checkConfig(e){let l=["itemsPerPage","currentPage"].filter(p=>!(p in e));if(0<l.length)throw new Error(`PaginatePipe: Argument is missing the following required properties: ${l.join(", ")}`)}saveState(e,n,l,p,m){this.state[e]={collection:n,size:n.length,slice:l,start:p,end:m}}stateIsIdentical(e,n,l,p){let m=this.state[e];return!m||!(m.size===n.length&&m.start===l&&m.end===p)?!1:m.slice.every((E,I)=>E===n[l+I])}}return t.\u0275fac=function(e){return new(e||t)(oe(ne,16))},t.\u0275pipe=se({name:"paginate",type:t,pure:!1,standalone:!1}),t})();var Ft=(()=>{class t{constructor(e,n){this.service=e,this.changeDetectorRef=n,this.maxSize=7,this.pageChange=new z,this.pageBoundsCorrection=new z,this.pages=[],this.changeSub=this.service.change.subscribe(l=>{this.id===l&&(this.updatePageLinks(),this.changeDetectorRef.markForCheck(),this.changeDetectorRef.detectChanges())})}ngOnInit(){this.id===void 0&&(this.id=this.service.defaultId()),this.updatePageLinks()}ngOnChanges(e){this.updatePageLinks()}ngOnDestroy(){this.changeSub.unsubscribe()}previous(){this.checkValidId(),this.setCurrent(this.getCurrent()-1)}next(){this.checkValidId(),this.setCurrent(this.getCurrent()+1)}isFirstPage(){return this.getCurrent()===1}isLastPage(){return this.getLastPage()===this.getCurrent()}setCurrent(e){this.pageChange.emit(e)}getCurrent(){return this.service.getCurrentPage(this.id)}getLastPage(){let e=this.service.getInstance(this.id);return e.totalItems<1?1:Math.ceil(e.totalItems/e.itemsPerPage)}getTotalItems(){return this.service.getInstance(this.id).totalItems}checkValidId(){this.service.getInstance(this.id).id==null&&console.warn(`PaginationControlsDirective: the specified id "${this.id}" does not match any registered PaginationInstance`)}updatePageLinks(){let e=this.service.getInstance(this.id),n=this.outOfBoundCorrection(e);n!==e.currentPage?setTimeout(()=>{this.pageBoundsCorrection.emit(n),this.pages=this.createPageArray(e.currentPage,e.itemsPerPage,e.totalItems,this.maxSize)}):this.pages=this.createPageArray(e.currentPage,e.itemsPerPage,e.totalItems,this.maxSize)}outOfBoundCorrection(e){let n=Math.ceil(e.totalItems/e.itemsPerPage);return n<e.currentPage&&0<n?n:e.currentPage<1?1:e.currentPage}createPageArray(e,n,l,p){p=+p;let m=[],h=Math.max(Math.ceil(l/n),1),E=Math.ceil(p/2),I=e<=E,re=h-E<e,O=!I&&!re,ae=p<h,H=1;for(;H<=h&&H<=p;){let Se,ke=this.calculatePageNumber(H,e,p,h),yt=H===2&&(O||re),Et=H===p-1&&(O||I);ae&&(yt||Et)?Se="...":Se=ke,m.push({label:Se,value:ke}),H++}return m}calculatePageNumber(e,n,l,p){let m=Math.ceil(l/2);return e===l?p:e===1?e:l<p?p-m<n?p-l+e:m<n?n-m+e:e:e}}return t.\u0275fac=function(e){return new(e||t)(oe(ne),oe(We))},t.\u0275dir=Fe({type:t,selectors:[["pagination-template"],["","pagination-template",""]],inputs:{id:"id",maxSize:"maxSize"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},exportAs:["paginationApi"],standalone:!1,features:[Ae]}),t})();function Le(t){return!!t&&t!=="false"}var ge=(()=>{class t{constructor(){this.maxSize=7,this.previousLabel="Previous",this.nextLabel="Next",this.screenReaderPaginationLabel="Pagination",this.screenReaderPageLabel="page",this.screenReaderCurrentLabel="You're on page",this.pageChange=new z,this.pageBoundsCorrection=new z,this._directionLinks=!0,this._autoHide=!1,this._responsive=!1}get directionLinks(){return this._directionLinks}set directionLinks(e){this._directionLinks=Le(e)}get autoHide(){return this._autoHide}set autoHide(e){this._autoHide=Le(e)}get responsive(){return this._responsive}set responsive(e){this._responsive=Le(e)}trackByIndex(e){return e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f({type:t,selectors:[["pagination-controls"]],inputs:{id:"id",maxSize:"maxSize",directionLinks:"directionLinks",autoHide:"autoHide",responsive:"responsive",previousLabel:"previousLabel",nextLabel:"nextLabel",screenReaderPaginationLabel:"screenReaderPaginationLabel",screenReaderPageLabel:"screenReaderPageLabel",screenReaderCurrentLabel:"screenReaderCurrentLabel"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},standalone:!1,decls:4,vars:4,consts:[["p","paginationApi"],[3,"pageChange","pageBoundsCorrection","id","maxSize"],["role","navigation"],["class","ngx-pagination",3,"responsive",4,"ngIf"],[1,"ngx-pagination"],["class","pagination-previous",3,"disabled",4,"ngIf"],[1,"small-screen"],[3,"current","ellipsis",4,"ngFor","ngForOf","ngForTrackBy"],["class","pagination-next",3,"disabled",4,"ngIf"],[1,"pagination-previous"],["tabindex","0",3,"keyup.enter","click",4,"ngIf"],["aria-disabled","true",4,"ngIf"],["tabindex","0",3,"keyup.enter","click"],[1,"show-for-sr"],["aria-disabled","true"],[4,"ngIf"],["aria-live","polite"],[1,"pagination-next"]],template:function(e,n){if(e&1){let l=S();r(0,"pagination-template",1,0),b("pageChange",function(m){return u(l),g(n.pageChange.emit(m))})("pageBoundsCorrection",function(m){return u(l),g(n.pageBoundsCorrection.emit(m))}),r(2,"nav",2),F(3,At,6,8,"ul",3),a()()}if(e&2){let l=y(1);_("id",n.id)("maxSize",n.maxSize),s(2),je("aria-label",n.screenReaderPaginationLabel),s(),_("ngIf",!(n.autoHide&&l.pages.length<=1))}},dependencies:[Ft,Ue,Ge,$e],styles:[`.ngx-pagination{margin-left:0;margin-bottom:1rem}.ngx-pagination:before,.ngx-pagination:after{content:" ";display:table}.ngx-pagination:after{clear:both}.ngx-pagination li{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;margin-right:.0625rem;border-radius:0}.ngx-pagination li{display:inline-block}.ngx-pagination a,.ngx-pagination button{color:#0a0a0a;display:block;padding:.1875rem .625rem;border-radius:0}.ngx-pagination a:hover,.ngx-pagination button:hover{background:#e6e6e6}.ngx-pagination .current{padding:.1875rem .625rem;background:#2199e8;color:#fefefe;cursor:default}.ngx-pagination .disabled{padding:.1875rem .625rem;color:#cacaca;cursor:default}.ngx-pagination .disabled:hover{background:transparent}.ngx-pagination a,.ngx-pagination button{cursor:pointer}.ngx-pagination .pagination-previous a:before,.ngx-pagination .pagination-previous.disabled:before{content:"\\ab";display:inline-block;margin-right:.5rem}.ngx-pagination .pagination-next a:after,.ngx-pagination .pagination-next.disabled:after{content:"\\bb";display:inline-block;margin-left:.5rem}.ngx-pagination .show-for-sr{position:absolute!important;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0)}.ngx-pagination .small-screen{display:none}@media screen and (max-width: 601px){.ngx-pagination.responsive .small-screen{display:inline-block}.ngx-pagination.responsive li:not(.small-screen):not(.pagination-previous):not(.pagination-next){display:none}}
`],encapsulation:2,changeDetection:0}),t})(),fe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Re({type:t}),t.\u0275inj=Me({providers:[ne],imports:[[q]]}),t})();var jt=(t,i)=>({itemsPerPage:t,currentPage:i}),ft=t=>["/events",t];function Bt(t,i){if(t&1&&(r(0,"p"),o(1),a()),t&2){let e=c(2);s(),d(e.childMessage)}}function Vt(t,i){if(t&1&&(r(0,"th"),o(1),a()),t&2){let e=i.$implicit;s(),d(e)}}function Ot(t,i){if(t&1&&(r(0,"td")(1,"a",7),o(2,"Cancel Event"),a()()),t&2){let e=c().$implicit;s(),_("routerLink",te(1,ft,e.eventId))}}function Ht(t,i){if(t&1&&(r(0,"tr")(1,"td"),o(2),a(),r(3,"td"),o(4),L(5,"uppercase"),a(),r(6,"td"),o(7),a(),r(8,"td"),o(9),L(10,"dateGlobalization"),a(),r(11,"td"),o(12),L(13,"dateGlobalization"),a(),r(14,"td"),o(15),L(16,"currency"),a(),r(17,"td")(18,"a",7),o(19,"show details"),a()(),x(20,Ot,3,3,"td"),a()),t&2){let e=i.$implicit,n=c(2);s(2),P("",e.eventCode," "),s(2),P("",He(5,8,e.eventName)," "),s(3),P("",e.description," "),s(2),d(M(10,10,e.startDate.toString(),"MR-IN")),s(3),d(M(13,13,e.endDate.toString(),"MR-IN")),s(3),d(M(16,16,e.fees,"INR")),s(3),_("routerLink",te(19,ft,e.eventId)),s(2),C(n.role==="Hr"?20:-1)}}function zt(t,i){if(t&1){let e=S();r(0,"h1"),o(1),a(),N(2,"hr"),r(3,"h6"),o(4),a(),x(5,Bt,2,1,"p"),r(6,"div",0)(7,"div",1)(8,"label",2),o(9,"Search Event"),a()(),r(10,"div",1)(11,"input",3),V("ngModelChange",function(l){u(e);let p=c();return B(p.searchChars,l)||(p.searchChars=l),g(l)}),b("input",function(){u(e);let l=c();return g(l.searchEvents())}),a()()(),N(12,"hr"),r(13,"table",4)(14,"thead")(15,"tr"),G(16,Vt,2,1,"th",null,W),a()(),r(18,"tbody"),G(19,Ht,21,21,"tr",null,W),L(21,"paginate"),a()(),r(22,"div",5)(23,"pagination-controls",6),b("pageChange",function(l){u(e);let p=c();return g(p.pageNumber=l)}),a()()}if(t&2){let e=c();s(),d(e.title),s(3),d(e.subtitle),s(),C(e.childMessage?5:-1),s(6),j("ngModel",e.searchChars),s(5),U(e.columns),s(3),U(M(21,4,e.filteredEvents,pe(7,jt,e.pageSize,e.pageNumber)))}}function Wt(t,i){t&1&&(r(0,"h4"),o(1,` Sorry ! We did not find any Event ! please Try Again after sometime.
`),a())}var he=class t{_eventServiceSubscription;eventsApi=v(ot);title="Welcome to Bajaj Finserv Events List!";subtitle="Published by Bajaj Finserv HR Department";columns=["Event Code","Event Name","Description","Start Date","End Date","Fees","Show Details","Cancel Event"];events=[];filteredEvents;searchChars="";childSubTitle="Details of selected event.";selectedEventId;childMessage;pageNumber=1;pageSize=2;storedPageNumber=1;isSearching=!1;role;ngOnInit(){this.role=localStorage.getItem("role"),this.role==="Employee"&&(this.columns=this.columns.filter(i=>i!=="Cancel Event")),this._eventServiceSubscription=this.eventsApi.getAllEvents().subscribe({next:i=>{console.log(i),this.events=i,this.filteredEvents=[...this.events]},error:i=>{console.log(i)}})}handleChildMessage(i){this.childMessage=i}onEventSelection(i){this.selectedEventId=i}get currentPage(){return this.pageNumber}onPageChange(i){this.pageNumber=i,this.isSearching||(this.storedPageNumber=i)}searchEvents(){this.searchChars=this.searchChars.trim();let i=!!this.searchChars;this.isSearching=i,i?(this.pageNumber=1,this.filteredEvents=this.events.filter(e=>e.eventName.toLocaleLowerCase().includes(this.searchChars.toLocaleLowerCase()))):(this.filteredEvents=this.events,this.pageNumber=this.storedPageNumber)}ngOnDestroy(){this._eventServiceSubscription&&this._eventServiceSubscription.unsubscribe()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-events-list"]],decls:2,vars:1,consts:[[1,"row","g-3","align-items-center"],[1,"col-auto"],["for","inputSearch",1,"col-form-label"],["type","search","id","inputSearch","placeholder","Search By Event Name",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"table","table-hover","table-striped"],[1,"container","text-center","my-pagination"],[3,"pageChange"],[1,"btn","btn-dark",3,"routerLink"]],template:function(e,n){e&1&&x(0,zt,24,10)(1,Wt,2,0,"h4"),e&2&&C(n.events&&n.events.length>0?0:1)},dependencies:[q,Z,$,Y,J,fe,ge,X,qe,Ye,de,ue],styles:[".container[_ngcontent-%COMP%]{color:red}"]})};var K=(t,i)=>{let e=localStorage.getItem("token"),n=v(D);return e===null?(n.navigate(["/login"],{queryParams:{returnurl:i.url}}),!1):!0};var ve=(t,i)=>{let e=localStorage.getItem("role"),n=v(D);return e!=="Hr"?(n.navigate(["/forbidden-access"]),!1):!0};var ht=[{path:"",component:he,title:"Bajaj Events Portal - Events List",canActivate:[K]},{path:"register",loadComponent:()=>import("./chunk-H4KK2Z5P.js").then(t=>t.RegisterEvent),title:"Register New Event",canActivate:[K,ve]},{path:":evid",loadComponent:()=>import("./chunk-4WIJP62M.js").then(t=>t.EventDetails),title:"Bajaj Events Portal - Event Details",data:{companyName:"Bajaj Finserv",role:"Employee"}}];var _e=class{email;password};var R=class t{_baseUrl="http://192.168.1.11:9090/api";_httpClient=v(Xe);authenticateCredentials(i){return this._httpClient.post(`${this._baseUrl}/users/authenticate`,i,{headers:{"Content-Type":"application/json"}}).pipe(Pe({next:e=>{e.token&&(localStorage.setItem("token",e.token),localStorage.setItem("refreshToken",e.refreshToken),localStorage.setItem("role",e.role),localStorage.setItem("email",e.email))}}))}getToken(){return localStorage.getItem("token")}getRefreshToken(){return localStorage.getItem("refreshToken")}getUserRole(){return localStorage.getItem("role")}getUserEmail(){return localStorage.getItem("email")}refreshToken(){let i=this.getRefreshToken(),e=localStorage.getItem("email");return!i||!e?(console.warn("No refresh token or email available. Logging out."),this.logout(),Q(()=>new Error("No refresh token available"))):this._httpClient.post(`${this._baseUrl}/users/refresh`,{email:e,refreshToken:i},{headers:new Ze({"Content-Type":"application/json"})}).pipe(Pe(n=>{n.token&&localStorage.setItem("token",n.token),n.refreshToken&&localStorage.setItem("refreshToken",n.refreshToken),console.log("Token refreshed successfully:",n)}))}logout(){localStorage.clear()}static \u0275fac=function(e){return new(e||t)};static \u0275prov=Te({token:t,factory:t.\u0275fac,providedIn:"root"})};function Gt(t,i){t&1&&(r(0,"div",11),o(1,"Please enter a valid email address."),a())}function Ut(t,i){t&1&&(r(0,"div",11),o(1,"Password must be at least 6 characters long."),a())}function qt(t,i){if(t&1&&(r(0,"div",17),o(1),a()),t&2){let e=c();s(),d(e.authErrorMessage)}}var xe=class t{_securityApi=v(R);_activatedRoute=v(st);_router=v(D);user=new _e;authResponse;authErrorMessage;_returnurl;ngOnInit(){this._returnurl=this._activatedRoute.snapshot.queryParams.returnurl}onCredentialsSubmit(){this._securityApi.authenticateCredentials(this.user).subscribe({next:i=>{i.token?this._returnurl?this._router.navigate([this._returnurl]):this._router.navigate(["/home"]):(this.authErrorMessage=i.message,setTimeout(()=>{this.authErrorMessage=""},5e3))}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-login"]],decls:27,vars:5,consts:[["email","ngModel"],["password","ngModel"],[1,"d-flex","justify-content-center","align-items-center","vh-100"],[1,"card","shadow-lg","border-0","rounded-4","p-4",2,"width","380px"],[1,"text-center","mb-3"],[1,"fw-bold","text-primary","mb-2"],[1,"text-muted"],[3,"ngSubmit"],[1,"mb-3"],["for","email",1,"form-label","fw-semibold"],["type","email","id","email","name","email","required","","email","","placeholder","Enter your email",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-danger"],["for","password","novalidate","",1,"form-label","fw-semibold"],["type","password","id","password","name","password","required","","minlength","6","placeholder","Enter your password",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-grid","mt-4"],["type","submit",1,"btn","btn-primary","btn-lg","rounded-pill"],[1,"text-center","mt-3"],[1,"alert","alert-message"]],template:function(e,n){if(e&1){let l=S();r(0,"div",2)(1,"div",3)(2,"div",4)(3,"h4",5),o(4,"Bajaj eCommerce Authentication"),a(),r(5,"p",6),o(6,"Login to your account"),a()(),r(7,"form",7),b("ngSubmit",function(){return u(l),g(n.onCredentialsSubmit())}),r(8,"div",8)(9,"label",9),o(10,"Email address"),a(),r(11,"input",10,0),V("ngModelChange",function(m){return u(l),B(n.user.email,m)||(n.user.email=m),g(m)}),a(),x(13,Gt,2,0,"div",11),a(),r(14,"div",8)(15,"label",12),o(16,"Password"),a(),r(17,"input",13,1),V("ngModelChange",function(m){return u(l),B(n.user.password,m)||(n.user.password=m),g(m)}),a(),x(19,Ut,2,0,"div",11),a(),r(20,"div",14)(21,"button",15),o(22," Login "),a()(),r(23,"div",16)(24,"small",6),o(25,"Forgot password?"),a()()()()(),x(26,qt,2,1,"div",17)}if(e&2){let l=y(12),p=y(18);s(11),j("ngModel",n.user.email),s(2),C(l.invalid&&(l.dirty||l.touched)?13:-1),s(4),j("ngModel",n.user.password),s(2),C(p.invalid&&(p.dirty||p.touched)?19:-1),s(7),C(n.authErrorMessage!==""?26:-1)}},dependencies:[Z,it,$,Y,et,nt,at,rt,J,tt],styles:["input.ng-invalid[_ngcontent-%COMP%]{border-left:solid 5px red}input.ng-valid[_ngcontent-%COMP%]{border-left:solid 5px green}"]})};var vt=[{path:"login",component:xe,title:"Login"}];var $t=(t,i)=>({itemsPerPage:t,currentPage:i}),Yt=t=>["/employees",t];function Jt(t,i){if(t&1&&(r(0,"p"),o(1),a()),t&2){let e=c(2);s(),d(e.childMessage)}}function Zt(t,i){if(t&1&&(r(0,"th"),o(1),a()),t&2){let e=i.$implicit;s(),d(e)}}function Xt(t,i){if(t&1&&(r(0,"tr")(1,"td")(2,"span"),o(3),a()(),r(4,"td")(5,"span"),o(6),a()(),r(7,"td")(8,"span"),o(9),a()(),r(10,"td")(11,"span"),o(12),a()(),r(13,"td")(14,"span"),o(15),a()(),r(16,"td")(17,"span"),o(18),a()(),r(19,"td")(20,"span"),o(21),a()(),r(22,"td")(23,"span"),o(24),a()(),r(25,"td")(26,"span"),o(27),a()(),r(28,"td")(29,"span"),o(30),a()(),r(31,"td")(32,"a",6),o(33,"Show Details"),a()()()),t&2){let e=i.$implicit;s(3),d(e.employeeId),s(3),d(e.employeeName),s(3),d(e.address),s(3),d(e.city),s(3),d(e.zipcode),s(3),d(e.phone),s(3),d(e.email),s(3),d(e.skillSets),s(3),d(e.country),s(3),d(e.joiningDate),s(2),_("routerLink",te(11,Yt,e.employeeId))}}function Kt(t,i){if(t&1){let e=S();r(0,"h1"),o(1),a(),N(2,"hr"),r(3,"h2"),o(4),a(),x(5,Jt,2,1,"p"),r(6,"div",0)(7,"div",1)(8,"input",2),V("ngModelChange",function(l){u(e);let p=c();return B(p.searchChars,l)||(p.searchChars=l),g(l)}),b("input",function(){u(e);let l=c();return g(l.searchEmployees())}),a()()(),r(9,"table",3)(10,"thead")(11,"tr"),G(12,Zt,2,1,"th",null,W),a()(),r(14,"tbody"),G(15,Xt,34,13,"tr",null,W),L(17,"paginate"),a()(),r(18,"div",4)(19,"pagination-controls",5),b("pageChange",function(l){u(e);let p=c();return g(p.pageNumber=l)}),a()()}if(t&2){let e=c();s(),d(e.title),s(3),d(e.subtitle),s(),C(e.childMessage?5:-1),s(3),j("ngModel",e.searchChars),s(4),U(e.columns),s(3),U(M(17,4,e.filteredEmployees,pe(7,$t,e.pageSize,e.pageNumber)))}}function Qt(t,i){t&1&&(r(0,"h3"),o(1,"No employees available"),a())}var Ce=class t{_employeeServiceSubscription;employeesApi=v(dt);title="Welcome to Bajaj Finserv Employees List!";subtitle="Published by Bajaj Finserv HR Department";columns=["Employee ID","Employee Name","Address","City","Zipcode","Phone","Email","Skill Sets","Country","Joining Date","Show Details"];employees=[];filteredEmployees=[...this.employees];searchChars="";childSubtitle="Employee Details";childMessage;pageNumber=1;pageSize=2;ngOnInit(){this._employeeServiceSubscription=this.employeesApi.getAllEmployees().subscribe({next:i=>{console.log(i),this.employees=i,this.filteredEmployees=[...this.employees]},error:i=>{console.log(i)}})}handleChildMessage(i){this.childMessage=i}searchEmployees(){!this.searchChars||this.searchChars==""?(console.log(this.searchChars),this.filteredEmployees=this.employees):(this.filteredEmployees=this.employees.filter(i=>i.employeeName.toLocaleLowerCase().includes(this.searchChars.toLocaleLowerCase())),console.log(this.filteredEmployees))}ngOnDestroy(){this._employeeServiceSubscription&&this._employeeServiceSubscription.unsubscribe()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-employees-list"]],decls:2,vars:1,consts:[[1,"row","text-center","mb-3"],[1,"container","row"],["type","search","aria-describedby","searchHelpInline","placeholder","Search for Employees here Employee Name!",1,"text-center",3,"ngModelChange","input","ngModel"],[1,"table","table-hover","table-striped"],[1,"container","text-center"],[3,"pageChange"],[1,"class-btn","btn-dark",3,"routerLink"]],template:function(e,n){e&1&&x(0,Kt,20,10)(1,Qt,2,0,"h3"),e&2&&C(n.employees&&n.employees.length>0?0:1)},dependencies:[Z,$,Y,J,fe,ge,q,X,ue],encapsulation:2})};var _t=[{path:"",component:Ce,title:"Bajaj Events Portal - Employees List",canActivate:[K]},{path:"register",loadComponent:()=>import("./chunk-6I7O4MWN.js").then(t=>t.RegisterEmployee),title:"Register New Employee",canActivate:[K,ve]},{path:":empid",loadComponent:()=>import("./chunk-WQWZ2WGR.js").then(t=>t.EmployeeDetails),title:"Bajaj Events Portal - Employee Details"}];var xt=[{path:"",component:ie,title:"Bajaj Events Portal - Home"},{path:"home",component:ie,title:"Bajaj Events Portal - Home"},{path:"employees",children:[..._t]},{path:"events",children:[...ht]},{path:"auth",children:[...vt]},{path:"forbidden-access",component:me,title:"Access Denied"},{path:"**",component:ce,title:"Not Found - 404"}];var Ct=(t,i)=>{let e=v(R),n=t.url.includes("/users"),l=localStorage.getItem("token"),p=t;if(!n){let m=t.headers.set("Content-Type","application/json").set("bajaj-authorization-token",l||"");p=t.clone({headers:m})}return i(p).pipe(Ie(m=>m.status===401&&!n?(console.warn("Token expired. Refreshing..."),e.refreshToken().pipe(we(h=>{let E=h.token;console.log("Token refreshed successfully:",JSON.stringify(h)),localStorage.setItem("token",E),h.refreshToken&&localStorage.setItem("refreshToken",h.refreshToken);let I=t.clone({setHeaders:{"Content-Type":"application/json","bajaj-authorization-token":E}});return i(I)}),Ie(h=>(console.error("Refresh failed, logging out."),e.logout(),Q(()=>h))))):Q(()=>m)))};var bt={providers:[Ne(),ze({eventCoalescing:!0}),Ke(Qe([Ct])),ct(xt)]};function ei(t,i){t&1&&(r(0,"li",7)(1,"a",13),o(2,"Register Employee"),a()())}function ti(t,i){t&1&&(r(0,"li",7)(1,"a",14),o(2,"Register Event"),a()())}function ii(t,i){if(t&1){let e=S();r(0,"li",7)(1,"a",15),b("click",function(){u(e);let l=c();return g(l.logout())}),o(2,"Logout"),a()()}}function ni(t,i){t&1&&(r(0,"li",7)(1,"a",16),o(2,"Login"),a()())}var be=class t{_router=v(D);_securityApi=v(R);isLoggedIn=!1;role;ngOnInit(){this._router.events.subscribe({next:i=>{this._securityApi.getToken()?(this.role=this._securityApi.getUserRole(),this.isLoggedIn=!0):this.isLoggedIn=!1}})}logout(){this.isLoggedIn=!1,this._securityApi.logout()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-navbar"]],decls:26,vars:3,consts:[["data-bs-theme","dark",1,"navbar","navbar-expand-lg","bg-primary"],[1,"container-fluid"],["routerLink","/","routerLinkActive","/",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarColor01","aria-controls","navbarColor01","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarColor01",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto"],[1,"nav-item"],["routerLink","/home","routerLinkActive","/",1,"nav-link","active"],[1,"visually-hidden"],["routerLink","/employees","routerLinkActive","/",1,"nav-link"],["routerLink","/events","routerLinkActive","/",1,"nav-link"],["href","#",1,"nav-link"],["routerLink","/employees/register","routerLinkActive","/",1,"nav-link"],["routerLink","/events/register","routerLinkActive","/",1,"nav-link"],["routerLink","/auth/login",1,"nav-link",3,"click"],["routerLink","/auth/login","routerLinkActive","/",1,"nav-link"]],template:function(e,n){e&1&&(r(0,"nav",0)(1,"div",1)(2,"a",2),o(3,"Bajaj EP"),a(),r(4,"button",3),N(5,"span",4),a(),r(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),o(10,"Home "),r(11,"span",9),o(12,"(current)"),a()()(),r(13,"li",7)(14,"a",10),o(15,"Employees"),a()(),x(16,ei,3,0,"li",7),r(17,"li",7)(18,"a",11),o(19,"Events"),a()(),x(20,ti,3,0,"li",7),r(21,"li",7)(22,"a",12),o(23,"SignUp"),a()(),x(24,ii,3,0,"li",7)(25,ni,3,0,"li",7),a()()()()),e&2&&(s(16),C(n.isLoggedIn===!0&&n.role==="Hr"?16:-1),s(4),C(n.isLoggedIn===!0&&n.role==="Hr"?20:-1),s(4),C(n.isLoggedIn?24:25))},dependencies:[mt,X,pt],encapsulation:2})};var ye=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-footer"]],decls:4,vars:0,consts:[[1,"text-center"]],template:function(e,n){e&1&&(le(0,"hr"),w(1,"div",0)(2,"p"),o(3,"\xA9 2025 Bajaj Finserv Events Portal. All rights reserved."),T()())},encapsulation:2})};var Ee=class t{title=De("bajaj-events-portal");static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-root"]],decls:3,vars:0,template:function(e,n){e&1&&N(0,"app-navbar")(1,"router-outlet")(2,"app-footer")},dependencies:[be,ye,lt],encapsulation:2})};Je(Ee,bt).catch(t=>console.error(t));
